        name: Deploy Flutter Web to GitHub Pages

        on:
          push:
            branches: [ main ] # Or your default branch

        jobs:
          build_and_deploy:
            runs-on: ubuntu-latest
            steps:
              - name: Checkout 🛎️
                uses: actions/checkout@v4

              - name: Setup Flutter SDK 🐦
                uses: subosito/flutter-action@v2
                with:
                  channel: 'stable' # Or your preferred channel

              - name: Install Dependencies 📦
                run: flutter pub get

              # --- THIS IS THE KEY STEP ---
              - name: Build Flutter Web 🏗️
                run: |
                  flutter build web --release --base-href /${{ github.event.repository.name }}/ --dart-define=GOOGLE_MAPS_API_KEY=${{ secrets.GOOGLE_MAPS_API_KEY }}
                # Note: Adjust --base-href if deploying to custom domain or root
                #       The --dart-define flag injects the secret

              - name: Deploy to GitHub Pages 🚀
                uses: peaceiris/actions-gh-pages@v4
                with:
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  publish_dir: ./build/web
                  # Optional: specify branch if not gh-pages
                  # publish_branch: gh-pages 
                  # Optional: specify custom domain if needed
                  # cname: yourdomain.com